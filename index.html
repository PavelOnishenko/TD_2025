<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Minimal Tower Defense</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
</head>
<body>
    <div id="startOverlay" class="overlay" role="dialog" aria-modal="true" aria-labelledby="startTitle">
        <div class="start-menu">
            <h1 id="startTitle">Minimal Tower Defense</h1>
            <p>Protect the base from incoming waves of enemies.</p>
            <button id="startGame" type="button">Start Game</button>
        </div>
    </div>

    <div id="pauseOverlay" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="pauseTitle">
        <div class="pause-menu">
            <h2 id="pauseTitle">Paused</h2>
            <p id="pauseMessage">Take a breather. The battle will wait.</p>
            <button id="resumeGame" type="button">Resume</button>
        </div>
    </div>

    <div id="endOverlay" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="endMessage" aria-describedby="endDetail">
        <div id="endMenu" class="start-menu end-menu">
            <h2 id="endMessage">Game Over</h2>
            <p id="endDetail">The base was destroyed. Try again!</p>
            <p id="endScore" class="end-score">Score: 0</p>
            <p id="endBestScore" class="end-best-score">Best: 0</p>
            <button id="endRestart" type="button">Restart</button>
        </div>
    </div>

    <main id="gameContainer">
        <canvas id="game" width="907" height="510"></canvas>
        <section id="hud" aria-label="Game controls and stats">
            <div id="lives" class="lives" aria-label="Lives"></div>
            <div class="hud-live-region" aria-live="polite">
                <div id="energy" class="resource" aria-label="Energy: 20">
                    <span class="resource-value">20</span>
                    <img class="resource-icon" src="assets/energy_sign.png" alt="" aria-hidden="true" />
                </div>
            </div>
            <div id="scorePanel" class="score-panel" aria-live="polite">
                <span id="score" class="score-value">Score: 0</span>
                <span id="bestScore" class="score-best">Best: 0</span>
            </div>
            <div class="wave-controls">
                <div class="hud-live-region" aria-live="polite">
                    <div id="wavePanel">
                        <span id="wave" class="wave-label">Wave: 1/10</span>
                        <span id="wavePhase" class="wave-phase wave-phase--prep">Preparation phase</span>
                        <span id="endlessIndicator" class="wave-endless hidden" aria-hidden="true">Endless Mode</span>
                    </div>
                </div>
                <div class="wave-controls__buttons" role="group" aria-label="Wave actions">
                    <button id="nextWave" type="button">Next Wave</button>
                    <button id="mergeTowers" type="button" disabled>Merge Towers</button>
                </div>
            </div>
            <div class="hud-live-region hud-live-region--status" aria-live="polite">
                <span id="status"></span>
            </div>
            <div id="tutorialTip" class="tutorial-tip hidden" aria-live="polite"></div>
            <div class="hud-controls">
                <button id="restart" type="button">Restart</button>
                <div id="saveControls" class="save-controls save-controls--hidden" role="group" aria-label="Save controls">
                    <button id="saveGame" type="button">Save Game</button>
                    <button id="loadGame" type="button" disabled>Load Game</button>
                    <button id="deleteSave" type="button" class="save-controls__delete">Delete Save</button>
                </div>
                <div class="audio-pause-controls">
                    <div class="audio-controls" role="group" aria-label="Audio controls">
                        <button id="muteToggle" type="button" aria-pressed="false">Mute</button>
                        <button id="musicToggle" type="button" aria-pressed="true">Music On</button>
                    </div>
                    <button id="pause" type="button" aria-pressed="false">Pause</button>
                </div>
            </div>
            <div id="crazyGamesUser" class="user-info hidden" aria-live="polite">
                <img id="crazyGamesUserAvatar" alt="CrazyGames profile picture" />
                <span id="crazyGamesUsername"></span>
            </div>
        </section>
        <div id="diagnosticsOverlay" class="diagnostics diagnostics--hidden" aria-live="polite" aria-atomic="true"></div>
    </main>

    <script type="module" src="js/main.js"></script>
</body>
</html>
